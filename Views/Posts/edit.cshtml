@model PostUpdateViewModel;
@{
    Layout = "_Layout";
    var tags = new SelectList(Model.AllTags, "TagId", "Text");
}
@section Style
{

    body{background: rgb(64,115,158,0.99);
    background: linear-gradient(90deg, rgba(220, 221, 225,1.0) 50%, rgba(64,115,158,0.99) 50%);}
    .form{
    -webkit-box-shadow:0px 0px 211px 102px rgba(3,83,180,1);
    -moz-box-shadow: 0px 0px 211px 102px rgba(3,83,180,1);
    box-shadow: 0px 0px 211px 102px rgba(3,83,180,1);
    }
    input{height:35px;
    }
    label{height:20px;}


}

<form method="post" asp-action="Edit" enctype="multipart/form-data">

<div class="container mt-5 pb-3">
    <div class="row d-flex align-items-center">



        <div class="col-xl-9 rounded">
            <div class="mx-1 bg-light p-3 rounded-3xl border-1 w-100">
                <input type="hidden" asp-for="PostId" />
                <div class="mb-2">
                    <div class="mb-1">
                        <label class="form-label">Bu yazının ilişkili olduğu Kategoriler</label>
                        @foreach (var tags in Model.AllTags)
                        {
                            if (Model.Tags.Any(x=>x.TagId==tags.TagId))
                            {
                                <span class="badge bg-@tags.Color">@tags.Text</span>

                            }

                        }
                    </div>

                </div>
                <div class="mb-2">
                    <label class="form-label" asp-for="Title"></label>
                    <input class="form-control" asp-for="Title"/>
                </div>
                <div class="mb-2">
                    <label class="form-label" asp-for="Description"></label>
                    <input class="form-control" asp-for="Description"/>
                </div>
                <div class="mb-2">
                    <label class="form-label" asp-for="Content"></label>
                    <textarea class="form-control" asp-for="Content"></textarea>
                </div>

                <div class="mb-2 d-flex py-3 align-items-center gap-1">
                    <div class="w-25">
                        <img src="/img/@Model.Image" class="img-fluid"/>
                        <input type="hidden" asp-for="Image" value="@Model.Image"/>
                    </div>
                    <input class="form-control" type="file" name="file"/>
                </div>

                @if (User.FindFirstValue(ClaimTypes.Role) == "admin")
                {
                    <div class="mb-2">
                        <label class="form-check-label">IsActive</label>
                        <input type="checkbox" asp-for="IsActive" class="form-check-input" />
                    </div>
                }

                <div class="mb-3 text-center">
                    <button class="btn btn-primary" type="submit">Postu Güncelle</button>
                </div>

               
                <div class="text-center text-danger" asp-validation-summary="All"></div>
            </div>


        </div>
        <div class="col-xl-3">
            <div class="bg-light p-5  rounded ">
                @foreach (var allTagss in Model.AllTags)
                {
                    <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="@allTagss.TagId" name="tagIds" id="tag_@allTagss.Text"
                               @(Model.Tags.Any(x=>x.TagId==@allTagss.TagId)?"checked":"") >
                        <label class="form-check-label" for="tag_@allTagss.Text">
                            @allTagss.Text
                        </label>
                    </div>
                }

            </div>

        </div>

    </div>
</div>
</form>
@section Scripts
{
    <script src="/lib/tinymce/tinymce.min.js"></script>

    <script>
        tinymce.init({
            selector: '#Content',
        });

    </script>

}
